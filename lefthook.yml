# Managing git hooks
pre-commit:
  commands:
    lint:
      files: git diff --name-only development
      glob: "*.{js,ts}*" # JS, TS, and TSX files
      run: yarn run lint {files}
    rubocop:
      files: git diff --name-only development
      # exclude: "excluded_filename.rb"
      tags: backend
      run: bundle exec rubocop -a {files}

pre-push: # githook name
  commands: # list of commands
    rubocop:
      tags: backend
      run: bundle exec rubocop --fail-level E # only fail on error or failure
    rspec:
      tags: rspec backend
      run: bundle exec crystalball --fail-fast
    packages-audit: # command name
      run: # yarn audit # command for execution

post-checkout:
  piped: true # Exit early if preceding command fails
  scripts:
    01-bundle-checkinstall:
      tags: backend
    02-db-migrate:
      tags: backend
    03-crystalball-update:
      tags: rspec backend



