# Managing git hooks
pre-commit:
  commands:
    lint:
      glob: "*.{js,ts}*" # JS, TS, and TSX files
      run: yarn run lint
      # Shouldn't this also run Prettier beforehand?
      # Are we using Prettier for Ruby or just Rubocop?
      # How to automate Ruby autoformatting?

pre-push: # githook name
  commands: # list of commands
    rubocop:
      tags: backend
      run: bundle exec rubocop --fail-level E # only fail on error or failure
    rspec:
      tags: rspec backend
      run: bundle exec crystalball --fail-fast
    packages-audit: # command name
      run: yarn audit # command for execution

post-checkout:
  piped: true # Exit early if preceding command fails
  scripts:
    01-bundle-checkinstall:
      tags: backend
    02-db-migrate:
      tags: backend
    03-crystalball-update:
      tags: rspec backend



