---
http_interactions:
- request:
    method: post
    uri: https://ideo-sso-profile-staging.herokuapp.com/api/v1/organizations
    body:
      encoding: UTF-8
      string: '{"data":{"type":"organizations","attributes":{"external_id":"4","name":"shell-0","admin_user_uid":"5221c50ae432ae16a9e2c18155b025","enterprise":false}}}'
    headers:
      User-Agent:
      - Faraday v0.12.2
      Content-Type:
      - application/vnd.api+json
      Accept:
      - application/vnd.api+json
      Authorization:
      - Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzUxMiJ9.eyJ0eXBlIjoiYXBwbGljYXRpb24iLCJjbGllbnRfaWQiOiIzNjk1YzVmZTU1YWIzZGI2ZjllZTI1ZjE4YzBlZjJmZTcwMjVlYjQ3MTdmMWEwMzFmZDc4MjRhNWQ4Y2RkYmI1IiwidWlkIjoiMDB1ZXFieGc5ZUFpODBTWjQwaDciLCJleHBpcmVzIjoxNTUzNjMyMjI3fQ.FxfLmkVWB70FBcm9rZ3odahqNjTephdbNhtAWAZ2F6Wk34aZVhdxc8yCXgijIq49p5LTx-6pG09hQARvC7jJLNVPo3N2Ht8QgVurrfStCu3LOEMbOrzgJH7wDp62q1UG8A0JCqooSWlZhWmO_vh9J99Q5nrALmafTej1jL2WYnjpPk6K16PlDrOf14nLjhWx9NWn0hm1BAAHjWTC11H1AXhMrvxiLgHuAqupMOBZZUBKBw6MWBRwfWBCyKaB-dbvbLKj0pHFGuScouzOSDzzr4JJq0l2JgSWbxrcsvevH0UTA3XPrQA5ciDAwNdf0PzhcSOIgN14xv-fcGwE8B2HXQ
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - Cowboy
      Date:
      - Tue, 28 Jan 2020 00:55:40 GMT
      Connection:
      - keep-alive
      X-Frame-Options:
      - SAMEORIGIN
      X-Xss-Protection:
      - 1; mode=block
      X-Content-Type-Options:
      - nosniff
      X-Download-Options:
      - noopen
      X-Permitted-Cross-Domain-Policies:
      - none
      Referrer-Policy:
      - strict-origin-when-cross-origin
      Content-Type:
      - application/vnd.api+json; charset=utf-8
      Set-Cookie:
      - _sso_profile_session=WTRiLzJwazI3ZW5mWXNsajM5MENNSWtnN3dtblRYeHpveTJZRXQ1QUZuUGtSbGVUeUtOMTRHcDdHMzROWEEvUE5yT1NKSjlmY1haNThJTUF0eUdkZE10eUV5V1JKWFhxT2l0OGFQKzU2U2NLdERoQnp6b2F1OG8rMW9hRjFENWYtLTFHMnN4N293RFIxUGJMSUtiRmY5eEE9PQ%3D%3D--d6f135617f25b601ed2d33ef3f3732ee3bfd7618;
        path=/; expires=Tue, 28 Jan 2020 04:55:40 -0000; HttpOnly; secure
      - rack.session=BAh7BkkiD3Nlc3Npb25faWQGOgZFVEkiRWFjZWM2MGE4Njk4ZDc2MGZjZDE4%0AMmFkN2QzYmQwMTFhOTUxYzA1ZGIwOGMzZmJmOTM5MjU1Y2ZiOWM2ZWY0ZmEG%0AOwBG%0A--18557187397b32278b9bd743835117555285243a;
        path=/; expires=Tue, 28 Jan 2020 04:55:40 -0000; HttpOnly; secure
      Etag:
      - W/"a9b538043e807021bf8547c6be1e34ed"
      Cache-Control:
      - max-age=0, private, must-revalidate
      X-Request-Id:
      - 0eaa4c1a-3bb1-4d32-b50d-9605955caf9b
      X-Runtime:
      - '0.021423'
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains
      Vary:
      - Origin
      Transfer-Encoding:
      - chunked
      Via:
      - 1.1 vegur
    body:
      encoding: UTF-8
      string: '{"data":{"id":"191","type":"organizations","attributes":{"id":191,"name":"Acme
        Inc 2.0","enterprise":false,"external_id":null},"relationships":{"applications":{"meta":{"included":false}},"application_organizations":{"meta":{"included":false}}}},"meta":{},"jsonapi":{"version":"1.0"}}'
    http_version: 
  recorded_at: Tue, 28 Jan 2020 00:55:40 GMT
- request:
    method: get
    uri: https://ideo-sso-profile-staging.herokuapp.com/api/v1/plans?page%5Bnumber%5D=1&page%5Bsize%5D=1
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - Faraday v0.12.2
      Content-Type:
      - application/vnd.api+json
      Accept:
      - application/vnd.api+json
      Authorization:
      - Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzUxMiJ9.eyJ0eXBlIjoiYXBwbGljYXRpb24iLCJjbGllbnRfaWQiOiIzNjk1YzVmZTU1YWIzZGI2ZjllZTI1ZjE4YzBlZjJmZTcwMjVlYjQ3MTdmMWEwMzFmZDc4MjRhNWQ4Y2RkYmI1IiwidWlkIjoiMDB1ZXFieGc5ZUFpODBTWjQwaDciLCJleHBpcmVzIjoxNTUzNjMyMjI3fQ.FxfLmkVWB70FBcm9rZ3odahqNjTephdbNhtAWAZ2F6Wk34aZVhdxc8yCXgijIq49p5LTx-6pG09hQARvC7jJLNVPo3N2Ht8QgVurrfStCu3LOEMbOrzgJH7wDp62q1UG8A0JCqooSWlZhWmO_vh9J99Q5nrALmafTej1jL2WYnjpPk6K16PlDrOf14nLjhWx9NWn0hm1BAAHjWTC11H1AXhMrvxiLgHuAqupMOBZZUBKBw6MWBRwfWBCyKaB-dbvbLKj0pHFGuScouzOSDzzr4JJq0l2JgSWbxrcsvevH0UTA3XPrQA5ciDAwNdf0PzhcSOIgN14xv-fcGwE8B2HXQ
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - Cowboy
      Date:
      - Tue, 28 Jan 2020 00:55:40 GMT
      Connection:
      - keep-alive
      X-Frame-Options:
      - SAMEORIGIN
      X-Xss-Protection:
      - 1; mode=block
      X-Content-Type-Options:
      - nosniff
      X-Download-Options:
      - noopen
      X-Permitted-Cross-Domain-Policies:
      - none
      Referrer-Policy:
      - strict-origin-when-cross-origin
      Content-Type:
      - application/vnd.api+json; charset=utf-8
      Set-Cookie:
      - _sso_profile_session=UlFaeWN0OGl5NVBOdzBMMjhGa3c4ZWtFYUJPTExmVkV2a2Fmd1N6Vmdvb1gyc3dwaVZtcFhLRjNoWTU5TVBpYkozclp3ZHFwR2dCS2E4WHh1R3o4aFZlaXFWUDFQd0FHQWoyb1FITGlDQmtZdkNlYWdKL2xGNllHcU9jSXllaHItLXRYc21TM0gxclA5OXpLNzBXWUI1M3c9PQ%3D%3D--b6683ec6e2772fefde6c9d2185cc068421d5957d;
        path=/; expires=Tue, 28 Jan 2020 04:55:41 -0000; HttpOnly; secure
      - rack.session=BAh7BkkiD3Nlc3Npb25faWQGOgZFVEkiRTJlNWMyMDBiODE4OGUwMjJiYzkz%0ANzFiOTViYWEyM2UzMjZlZWQ1OWM2OTU1N2JkY2IzYzlmYTY5OWUwMmVhMmQG%0AOwBG%0A--a5b0db1e5c07e4a8557adf1170801e7a5a01dc9e;
        path=/; expires=Tue, 28 Jan 2020 04:55:41 -0000; HttpOnly; secure
      Etag:
      - W/"2952759970425a14c9c44c1c10571c9a"
      Cache-Control:
      - max-age=0, private, must-revalidate
      X-Request-Id:
      - 3e90e60e-e82b-4dcb-9f48-bf8c34a5b21a
      X-Runtime:
      - '0.014040'
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains
      Vary:
      - Origin
      Transfer-Encoding:
      - chunked
      Via:
      - 1.1 vegur
    body:
      encoding: UTF-8
      string: '{"data":[{"id":"18","type":"plans","attributes":{"id":18,"name":"User","stripe_id":"plan_DcjhjFf1GikIut","amount":4.5,"interval":"month","usage_type":"metered","currency":"usd","updated_at":"2018-09-17T21:25:54.655Z"}}],"meta":{},"jsonapi":{"version":"1.0"}}'
    http_version: 
  recorded_at: Tue, 28 Jan 2020 00:55:41 GMT
- request:
    method: get
    uri: https://ideo-sso-profile-staging.herokuapp.com/api/v1/organizations?filter%5Bclient_id%5D=3695c5fe55ab3db6f9ee25f18c0ef2fe7025eb4717f1a031fd7824a5d8cddbb5&filter%5Bexternal_id%5D=4&page%5Bnumber%5D=1&page%5Bsize%5D=1
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - Faraday v0.12.2
      Content-Type:
      - application/vnd.api+json
      Accept:
      - application/vnd.api+json
      Authorization:
      - Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzUxMiJ9.eyJ0eXBlIjoiYXBwbGljYXRpb24iLCJjbGllbnRfaWQiOiIzNjk1YzVmZTU1YWIzZGI2ZjllZTI1ZjE4YzBlZjJmZTcwMjVlYjQ3MTdmMWEwMzFmZDc4MjRhNWQ4Y2RkYmI1IiwidWlkIjoiMDB1ZXFieGc5ZUFpODBTWjQwaDciLCJleHBpcmVzIjoxNTUzNjMyMjI3fQ.FxfLmkVWB70FBcm9rZ3odahqNjTephdbNhtAWAZ2F6Wk34aZVhdxc8yCXgijIq49p5LTx-6pG09hQARvC7jJLNVPo3N2Ht8QgVurrfStCu3LOEMbOrzgJH7wDp62q1UG8A0JCqooSWlZhWmO_vh9J99Q5nrALmafTej1jL2WYnjpPk6K16PlDrOf14nLjhWx9NWn0hm1BAAHjWTC11H1AXhMrvxiLgHuAqupMOBZZUBKBw6MWBRwfWBCyKaB-dbvbLKj0pHFGuScouzOSDzzr4JJq0l2JgSWbxrcsvevH0UTA3XPrQA5ciDAwNdf0PzhcSOIgN14xv-fcGwE8B2HXQ
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - Cowboy
      Date:
      - Tue, 28 Jan 2020 00:55:40 GMT
      Connection:
      - keep-alive
      X-Frame-Options:
      - SAMEORIGIN
      X-Xss-Protection:
      - 1; mode=block
      X-Content-Type-Options:
      - nosniff
      X-Download-Options:
      - noopen
      X-Permitted-Cross-Domain-Policies:
      - none
      Referrer-Policy:
      - strict-origin-when-cross-origin
      Content-Type:
      - application/vnd.api+json; charset=utf-8
      Set-Cookie:
      - _sso_profile_session=RkpXSENsdG44RHV1WFJyVytxZXNUbkNuNlFjNzhQeHd3VDIwOExkcWpWOUNjU0llTG1FNk0rMUxpb3NPL0dudUs1Um9qM1JkV2ZGeDFnNENIb0ljeGsrcjhBR3BBMVhYVGVRNXpzNzdXd0w2eitBdU1Qb2dZemJNeHVuQ0lxRjQtLVdnajFuQTVxbnRpaVovZnFlbDFOZUE9PQ%3D%3D--b4f5d54d4f7e62b6592ff74fab28dabd3f45f350;
        path=/; expires=Tue, 28 Jan 2020 04:55:41 -0000; HttpOnly; secure
      - rack.session=BAh7BkkiD3Nlc3Npb25faWQGOgZFVEkiRTgxZmI0YjdiMDIzODVjM2ViNWJl%0AMTcxNTAxYTIwNjNkNzJkZTIyNDEzZjIxZTRiM2MxNTc5MDc1ZDFjOWJlMTAG%0AOwBG%0A--6bede97efcdb558dfbdad6b247449cc2d086cb77;
        path=/; expires=Tue, 28 Jan 2020 04:55:41 -0000; HttpOnly; secure
      Etag:
      - W/"a39f0f6b7bd1329edbf1433d23047f60"
      Cache-Control:
      - max-age=0, private, must-revalidate
      X-Request-Id:
      - 2dfb0457-a670-44a6-b527-13663a67066d
      X-Runtime:
      - '0.021609'
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains
      Vary:
      - Origin
      Transfer-Encoding:
      - chunked
      Via:
      - 1.1 vegur
    body:
      encoding: UTF-8
      string: '{"data":[{"id":"191","type":"organizations","attributes":{"id":191,"name":"Acme
        Inc 2.0","enterprise":false,"external_id":null},"relationships":{"applications":{"data":[{"type":"applications","id":"17"}]},"application_organizations":{"meta":{"included":false}}}}],"included":[{"id":"17","type":"applications","attributes":{"name":"Shape
        - local development","client_id":"3695c5fe55ab3db6f9ee25f18c0ef2fe7025eb4717f1a031fd7824a5d8cddbb5","redirect_uri":"http://localhost:3000/users/auth/ideo/callback","header_image_url":"","additional_fields_message":"","welcome_markdown":null,"terms_markdown":null,"support_email":null,"supplementary_logo_url":null}}],"meta":{},"jsonapi":{"version":"1.0"}}'
    http_version: 
  recorded_at: Tue, 28 Jan 2020 00:55:41 GMT
- request:
    method: get
    uri: https://ideo-sso-profile-staging.herokuapp.com/api/v1/payment_methods?filter%5Bdefault%5D=true&filter%5Borganization_id%5D=191
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - Faraday v0.12.2
      Content-Type:
      - application/vnd.api+json
      Accept:
      - application/vnd.api+json
      Authorization:
      - Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzUxMiJ9.eyJ0eXBlIjoiYXBwbGljYXRpb24iLCJjbGllbnRfaWQiOiIzNjk1YzVmZTU1YWIzZGI2ZjllZTI1ZjE4YzBlZjJmZTcwMjVlYjQ3MTdmMWEwMzFmZDc4MjRhNWQ4Y2RkYmI1IiwidWlkIjoiMDB1ZXFieGc5ZUFpODBTWjQwaDciLCJleHBpcmVzIjoxNTUzNjMyMjI3fQ.FxfLmkVWB70FBcm9rZ3odahqNjTephdbNhtAWAZ2F6Wk34aZVhdxc8yCXgijIq49p5LTx-6pG09hQARvC7jJLNVPo3N2Ht8QgVurrfStCu3LOEMbOrzgJH7wDp62q1UG8A0JCqooSWlZhWmO_vh9J99Q5nrALmafTej1jL2WYnjpPk6K16PlDrOf14nLjhWx9NWn0hm1BAAHjWTC11H1AXhMrvxiLgHuAqupMOBZZUBKBw6MWBRwfWBCyKaB-dbvbLKj0pHFGuScouzOSDzzr4JJq0l2JgSWbxrcsvevH0UTA3XPrQA5ciDAwNdf0PzhcSOIgN14xv-fcGwE8B2HXQ
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - Cowboy
      Date:
      - Tue, 28 Jan 2020 00:55:40 GMT
      Connection:
      - keep-alive
      X-Frame-Options:
      - SAMEORIGIN
      X-Xss-Protection:
      - 1; mode=block
      X-Content-Type-Options:
      - nosniff
      X-Download-Options:
      - noopen
      X-Permitted-Cross-Domain-Policies:
      - none
      Referrer-Policy:
      - strict-origin-when-cross-origin
      Content-Type:
      - application/vnd.api+json; charset=utf-8
      Set-Cookie:
      - _sso_profile_session=OU5DdXBuN2VacG4vSXZObjE2YW5RbWhseHBqZHpyVUlEL2xNV2pvbDV3ajJMOXk4MENZNUlwQ21VYU91akxKMzJabUJyeE5KRWdMTExCanRObmhZQXgwMlBsQXc2TmxQZ3dvTGRiVG9lSVhoM0pnTUtOZ1F6N3VvRTZSZnFnU2UtLXRNa3F3SHdpY05tZVg3R1hpY3FNTEE9PQ%3D%3D--2eb53c3aa023637dcee2aa9764bedcf2e31ba005;
        path=/; expires=Tue, 28 Jan 2020 04:55:41 -0000; HttpOnly; secure
      - rack.session=BAh7BkkiD3Nlc3Npb25faWQGOgZFVEkiRTZjOGQxOThmMDIwMWNhN2ZjNTBl%0AYjRjMDg5YjljMzhhMzZlZWE1ZDdmOTFlNzk1MDliN2MxOWYxMDQ3YzhiZmUG%0AOwBG%0A--1ad35954baf7c61a7303cbfdb513ac15cc4c70d7;
        path=/; expires=Tue, 28 Jan 2020 04:55:41 -0000; HttpOnly; secure
      Etag:
      - W/"9cb0f11ceff0010d135e52d64db2d726"
      Cache-Control:
      - max-age=0, private, must-revalidate
      X-Request-Id:
      - 0add6adc-adee-4e50-9e7f-97ed53bd97f0
      X-Runtime:
      - '0.011118'
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains
      Vary:
      - Origin
      Transfer-Encoding:
      - chunked
      Via:
      - 1.1 vegur
    body:
      encoding: UTF-8
      string: '{"data":[],"meta":{},"jsonapi":{"version":"1.0"}}'
    http_version: 
  recorded_at: Tue, 28 Jan 2020 00:55:41 GMT
- request:
    method: post
    uri: https://ideo-sso-profile-staging.herokuapp.com/api/v1/subscriptions
    body:
      encoding: UTF-8
      string: '{"data":{"type":"subscriptions","attributes":{"organization_id":191,"plan_id":18}}}'
    headers:
      User-Agent:
      - Faraday v0.12.2
      Content-Type:
      - application/vnd.api+json
      Accept:
      - application/vnd.api+json
      Authorization:
      - Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzUxMiJ9.eyJ0eXBlIjoiYXBwbGljYXRpb24iLCJjbGllbnRfaWQiOiIzNjk1YzVmZTU1YWIzZGI2ZjllZTI1ZjE4YzBlZjJmZTcwMjVlYjQ3MTdmMWEwMzFmZDc4MjRhNWQ4Y2RkYmI1IiwidWlkIjoiMDB1ZXFieGc5ZUFpODBTWjQwaDciLCJleHBpcmVzIjoxNTUzNjMyMjI3fQ.FxfLmkVWB70FBcm9rZ3odahqNjTephdbNhtAWAZ2F6Wk34aZVhdxc8yCXgijIq49p5LTx-6pG09hQARvC7jJLNVPo3N2Ht8QgVurrfStCu3LOEMbOrzgJH7wDp62q1UG8A0JCqooSWlZhWmO_vh9J99Q5nrALmafTej1jL2WYnjpPk6K16PlDrOf14nLjhWx9NWn0hm1BAAHjWTC11H1AXhMrvxiLgHuAqupMOBZZUBKBw6MWBRwfWBCyKaB-dbvbLKj0pHFGuScouzOSDzzr4JJq0l2JgSWbxrcsvevH0UTA3XPrQA5ciDAwNdf0PzhcSOIgN14xv-fcGwE8B2HXQ
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 422
      message: Unprocessable Entity
    headers:
      Server:
      - Cowboy
      Date:
      - Tue, 28 Jan 2020 00:55:41 GMT
      Connection:
      - keep-alive
      X-Frame-Options:
      - SAMEORIGIN
      X-Xss-Protection:
      - 1; mode=block
      X-Content-Type-Options:
      - nosniff
      X-Download-Options:
      - noopen
      X-Permitted-Cross-Domain-Policies:
      - none
      Referrer-Policy:
      - strict-origin-when-cross-origin
      Content-Type:
      - application/scim+json; charset=utf-8
      Set-Cookie:
      - _sso_profile_session=clVEc1lYbzlnY0FFTFptOFAvM0E5YVpjN1ZQbkZlai92L25tT2JRUkwvUDc5KzVXd3IxeUN6Mi9uUUhxM0VYaGhRNXdzRUZna2QrUWtKTk5HNmdxZWhWWkoxcUJrVkZIUnhMUk1JMFk1UEpyRU8yTnpxTWJnMStlYWJSUFZZd0ctLVA5MVo0aTdIQS9SVm1vRG5vK2tMaGc9PQ%3D%3D--9897014bae22f1c7ebcf84645e02131aed4544dd;
        path=/; expires=Tue, 28 Jan 2020 04:55:42 -0000; HttpOnly; secure
      - rack.session=BAh7BkkiD3Nlc3Npb25faWQGOgZFVEkiRWRhZjM1YTYzODY3MGI4MTk3ZmEw%0AZjU2ZGQxMGJjMWIxODIzZjYxOTBkYjczY2YyN2YwMTgzZDVmZGY3MzIxNzMG%0AOwBG%0A--1a447bc7021d267f49fd05e133c25085fef003b3;
        path=/; expires=Tue, 28 Jan 2020 04:55:42 -0000; HttpOnly; secure
      Cache-Control:
      - no-cache
      X-Request-Id:
      - 31d13dc2-cce8-4661-86e5-12748b22f964
      X-Runtime:
      - '0.018246'
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains
      Vary:
      - Origin
      Transfer-Encoding:
      - chunked
      Via:
      - 1.1 vegur
    body:
      encoding: UTF-8
      string: '{"errors":[{"code":"unprocessable_entity","status":"422","title":"Validation
        Error","detail":"Payment method already has an active subscription on this
        same organization and plan","source":{"pointer":"/data/relationships/payment_method"},"meta":{"attribute":"payment_method","message":"already
        has an active subscription on this same organization and plan","code":"already
        has an active subscription on this same organization and plan"}}]}'
    http_version: 
  recorded_at: Tue, 28 Jan 2020 00:55:42 GMT
recorded_with: VCR 4.0.0
