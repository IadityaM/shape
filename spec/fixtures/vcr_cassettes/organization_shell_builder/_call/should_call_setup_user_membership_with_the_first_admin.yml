---
http_interactions:
- request:
    method: post
    uri: https://ideo-sso-profile-staging.herokuapp.com/api/v1/organizations
    body:
      encoding: UTF-8
      string: '{"data":{"type":"organizations","attributes":{"external_id":"1","name":"shell-0","admin_user_uid":"6e3fcd309a87baaeea9f9d2115cf79","enterprise":false}}}'
    headers:
      User-Agent:
      - Faraday v0.12.2
      Content-Type:
      - application/vnd.api+json
      Accept:
      - application/vnd.api+json
      Authorization:
      - Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzUxMiJ9.eyJ0eXBlIjoiYXBwbGljYXRpb24iLCJjbGllbnRfaWQiOiIzNjk1YzVmZTU1YWIzZGI2ZjllZTI1ZjE4YzBlZjJmZTcwMjVlYjQ3MTdmMWEwMzFmZDc4MjRhNWQ4Y2RkYmI1IiwidWlkIjoiMDB1ZXFieGc5ZUFpODBTWjQwaDciLCJleHBpcmVzIjoxNTUzNjMyMjI3fQ.FxfLmkVWB70FBcm9rZ3odahqNjTephdbNhtAWAZ2F6Wk34aZVhdxc8yCXgijIq49p5LTx-6pG09hQARvC7jJLNVPo3N2Ht8QgVurrfStCu3LOEMbOrzgJH7wDp62q1UG8A0JCqooSWlZhWmO_vh9J99Q5nrALmafTej1jL2WYnjpPk6K16PlDrOf14nLjhWx9NWn0hm1BAAHjWTC11H1AXhMrvxiLgHuAqupMOBZZUBKBw6MWBRwfWBCyKaB-dbvbLKj0pHFGuScouzOSDzzr4JJq0l2JgSWbxrcsvevH0UTA3XPrQA5ciDAwNdf0PzhcSOIgN14xv-fcGwE8B2HXQ
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - Cowboy
      Date:
      - Tue, 28 Jan 2020 00:55:34 GMT
      Connection:
      - keep-alive
      X-Frame-Options:
      - SAMEORIGIN
      X-Xss-Protection:
      - 1; mode=block
      X-Content-Type-Options:
      - nosniff
      X-Download-Options:
      - noopen
      X-Permitted-Cross-Domain-Policies:
      - none
      Referrer-Policy:
      - strict-origin-when-cross-origin
      Content-Type:
      - application/vnd.api+json; charset=utf-8
      Set-Cookie:
      - _sso_profile_session=bXUyY3JOb1plZ1ZEM2lSakQ2bG4yMHFlMVgyVEplektBKzlzdEtQbEVEYVJsTGdibWVJRzN5TmdWN0Z2WmhrZzRNTXcyYTAzVUloc3JHMmpkZGg0aFJNQm1YSzVWZVZ1RFpDWElPQ1dWWDNxYUFpMVpEVExQSXoxdnhQdFNrcGItLTVwQzVHVm10ck1Wb0h1Zm5SVzBuWUE9PQ%3D%3D--088af0f83077e839917e4e938d71983806c041c9;
        path=/; expires=Tue, 28 Jan 2020 04:55:35 -0000; HttpOnly; secure
      - rack.session=BAh7BkkiD3Nlc3Npb25faWQGOgZFVEkiRWFmY2I3NzAxMjBmOGNlY2YwNDg1%0AMjFlMzhlNGM4MjUyNzE2YzI1MGEwNTg1YTY4MThhZTc4MjJjMGE1Zjg4YjIG%0AOwBG%0A--8b6087aa13d022c133f4efab14ced77688cf5a98;
        path=/; expires=Tue, 28 Jan 2020 04:55:35 -0000; HttpOnly; secure
      Etag:
      - W/"63ca7501548f5212185ebcda2785dc0a"
      Cache-Control:
      - max-age=0, private, must-revalidate
      X-Request-Id:
      - bd327b4e-d340-469d-a230-2a9a6565bf5f
      X-Runtime:
      - '0.075340'
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains
      Vary:
      - Origin
      Transfer-Encoding:
      - chunked
      Via:
      - 1.1 vegur
    body:
      encoding: UTF-8
      string: '{"data":{"id":"186","type":"organizations","attributes":{"id":186,"name":"Acme
        Inc 2.0","enterprise":false,"external_id":null},"relationships":{"applications":{"meta":{"included":false}},"application_organizations":{"meta":{"included":false}}}},"meta":{},"jsonapi":{"version":"1.0"}}'
    http_version: 
  recorded_at: Tue, 28 Jan 2020 00:55:35 GMT
- request:
    method: get
    uri: https://ideo-sso-profile-staging.herokuapp.com/api/v1/plans?page%5Bnumber%5D=1&page%5Bsize%5D=1
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - Faraday v0.12.2
      Content-Type:
      - application/vnd.api+json
      Accept:
      - application/vnd.api+json
      Authorization:
      - Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzUxMiJ9.eyJ0eXBlIjoiYXBwbGljYXRpb24iLCJjbGllbnRfaWQiOiIzNjk1YzVmZTU1YWIzZGI2ZjllZTI1ZjE4YzBlZjJmZTcwMjVlYjQ3MTdmMWEwMzFmZDc4MjRhNWQ4Y2RkYmI1IiwidWlkIjoiMDB1ZXFieGc5ZUFpODBTWjQwaDciLCJleHBpcmVzIjoxNTUzNjMyMjI3fQ.FxfLmkVWB70FBcm9rZ3odahqNjTephdbNhtAWAZ2F6Wk34aZVhdxc8yCXgijIq49p5LTx-6pG09hQARvC7jJLNVPo3N2Ht8QgVurrfStCu3LOEMbOrzgJH7wDp62q1UG8A0JCqooSWlZhWmO_vh9J99Q5nrALmafTej1jL2WYnjpPk6K16PlDrOf14nLjhWx9NWn0hm1BAAHjWTC11H1AXhMrvxiLgHuAqupMOBZZUBKBw6MWBRwfWBCyKaB-dbvbLKj0pHFGuScouzOSDzzr4JJq0l2JgSWbxrcsvevH0UTA3XPrQA5ciDAwNdf0PzhcSOIgN14xv-fcGwE8B2HXQ
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - Cowboy
      Date:
      - Tue, 28 Jan 2020 00:55:34 GMT
      Connection:
      - keep-alive
      X-Frame-Options:
      - SAMEORIGIN
      X-Xss-Protection:
      - 1; mode=block
      X-Content-Type-Options:
      - nosniff
      X-Download-Options:
      - noopen
      X-Permitted-Cross-Domain-Policies:
      - none
      Referrer-Policy:
      - strict-origin-when-cross-origin
      Content-Type:
      - application/vnd.api+json; charset=utf-8
      Set-Cookie:
      - _sso_profile_session=bmZHcWw3RGNNOStVOEF5cHZJQWFtOHExa28rWkw4U0pTRzByM0J4N2xKYWU0SzlJNGRuYkhlcktxekMxdWJ5Skk5M3JmWXpCV1pZZXlwRGFqc2swcUdnazhSUkdGSy9CYjZrZk1HK2d1SURYMHdTb0JXMUVvcEVBMHVtRW9FV2ctLVlFd2Z3blNwQmljS1JFRW0rcCs1YkE9PQ%3D%3D--b386b8d6f53569ac9416c49308a59c3faa72e045;
        path=/; expires=Tue, 28 Jan 2020 04:55:35 -0000; HttpOnly; secure
      - rack.session=BAh7BkkiD3Nlc3Npb25faWQGOgZFVEkiRTFmYjIzOGFmNDYyYmYzNzBlODcy%0ANDFhNGUzODUwYWZkMmI2YjUyZjY1OTYxMGNlZTE2MDFhMzRhMWIwMmZhZjIG%0AOwBG%0A--d5856fd363218f239b5bb1b5f59832c16ffe1985;
        path=/; expires=Tue, 28 Jan 2020 04:55:35 -0000; HttpOnly; secure
      Etag:
      - W/"2952759970425a14c9c44c1c10571c9a"
      Cache-Control:
      - max-age=0, private, must-revalidate
      X-Request-Id:
      - 4c2e245f-7381-4955-b56f-9c4fa6f5c7ab
      X-Runtime:
      - '0.017509'
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains
      Vary:
      - Origin
      Transfer-Encoding:
      - chunked
      Via:
      - 1.1 vegur
    body:
      encoding: UTF-8
      string: '{"data":[{"id":"18","type":"plans","attributes":{"id":18,"name":"User","stripe_id":"plan_DcjhjFf1GikIut","amount":4.5,"interval":"month","usage_type":"metered","currency":"usd","updated_at":"2018-09-17T21:25:54.655Z"}}],"meta":{},"jsonapi":{"version":"1.0"}}'
    http_version: 
  recorded_at: Tue, 28 Jan 2020 00:55:35 GMT
- request:
    method: get
    uri: https://ideo-sso-profile-staging.herokuapp.com/api/v1/organizations?filter%5Bclient_id%5D=3695c5fe55ab3db6f9ee25f18c0ef2fe7025eb4717f1a031fd7824a5d8cddbb5&filter%5Bexternal_id%5D=1&page%5Bnumber%5D=1&page%5Bsize%5D=1
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - Faraday v0.12.2
      Content-Type:
      - application/vnd.api+json
      Accept:
      - application/vnd.api+json
      Authorization:
      - Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzUxMiJ9.eyJ0eXBlIjoiYXBwbGljYXRpb24iLCJjbGllbnRfaWQiOiIzNjk1YzVmZTU1YWIzZGI2ZjllZTI1ZjE4YzBlZjJmZTcwMjVlYjQ3MTdmMWEwMzFmZDc4MjRhNWQ4Y2RkYmI1IiwidWlkIjoiMDB1ZXFieGc5ZUFpODBTWjQwaDciLCJleHBpcmVzIjoxNTUzNjMyMjI3fQ.FxfLmkVWB70FBcm9rZ3odahqNjTephdbNhtAWAZ2F6Wk34aZVhdxc8yCXgijIq49p5LTx-6pG09hQARvC7jJLNVPo3N2Ht8QgVurrfStCu3LOEMbOrzgJH7wDp62q1UG8A0JCqooSWlZhWmO_vh9J99Q5nrALmafTej1jL2WYnjpPk6K16PlDrOf14nLjhWx9NWn0hm1BAAHjWTC11H1AXhMrvxiLgHuAqupMOBZZUBKBw6MWBRwfWBCyKaB-dbvbLKj0pHFGuScouzOSDzzr4JJq0l2JgSWbxrcsvevH0UTA3XPrQA5ciDAwNdf0PzhcSOIgN14xv-fcGwE8B2HXQ
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - Cowboy
      Date:
      - Tue, 28 Jan 2020 00:55:34 GMT
      Connection:
      - keep-alive
      X-Frame-Options:
      - SAMEORIGIN
      X-Xss-Protection:
      - 1; mode=block
      X-Content-Type-Options:
      - nosniff
      X-Download-Options:
      - noopen
      X-Permitted-Cross-Domain-Policies:
      - none
      Referrer-Policy:
      - strict-origin-when-cross-origin
      Content-Type:
      - application/vnd.api+json; charset=utf-8
      Set-Cookie:
      - _sso_profile_session=eE1XOXJoOUR0ejVOY2ZNeWJNK2ZaVStQZHlyTktjWldTYzRjOTBnd0FUWmZQL0ZIQmZqWW9paEhabndLT2N4U3NSTllyVm1aY0lJZEZzeVA0cGYyZStqWlRKVTAxZEJXbUpYQWxQL2hTOEl2UWVNQVQvTXQ4ejNUUHNiQnpPZWktLUN0VUZEdlUrQWN3cUEvQUJFRmZrdHc9PQ%3D%3D--7677c52890b42844ab0fc13322694c3d57a85928;
        path=/; expires=Tue, 28 Jan 2020 04:55:35 -0000; HttpOnly; secure
      - rack.session=BAh7BkkiD3Nlc3Npb25faWQGOgZFVEkiRTZlODIwMWMxNTU5NTdmODgzZDRm%0AMDg2ZDAwZTViNTVmMTljNTMyMjI0NjNmYWEyZjc4OGE2YTE3ZWQwNGM2ODAG%0AOwBG%0A--ca4b7782a18a65dbed85b642e2f6e0034eb5f930;
        path=/; expires=Tue, 28 Jan 2020 04:55:35 -0000; HttpOnly; secure
      Etag:
      - W/"74872aed6f0b0bd8836fff9374de48f0"
      Cache-Control:
      - max-age=0, private, must-revalidate
      X-Request-Id:
      - 683f99e2-59da-4224-9b87-ccfcb77f18ed
      X-Runtime:
      - '0.022509'
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains
      Vary:
      - Origin
      Transfer-Encoding:
      - chunked
      Via:
      - 1.1 vegur
    body:
      encoding: UTF-8
      string: '{"data":[{"id":"186","type":"organizations","attributes":{"id":186,"name":"Acme
        Inc 2.0","enterprise":false,"external_id":null},"relationships":{"applications":{"data":[{"type":"applications","id":"17"}]},"application_organizations":{"meta":{"included":false}}}}],"included":[{"id":"17","type":"applications","attributes":{"name":"Shape
        - local development","client_id":"3695c5fe55ab3db6f9ee25f18c0ef2fe7025eb4717f1a031fd7824a5d8cddbb5","redirect_uri":"http://localhost:3000/users/auth/ideo/callback","header_image_url":"","additional_fields_message":"","welcome_markdown":null,"terms_markdown":null,"support_email":null,"supplementary_logo_url":null}}],"meta":{},"jsonapi":{"version":"1.0"}}'
    http_version: 
  recorded_at: Tue, 28 Jan 2020 00:55:35 GMT
- request:
    method: get
    uri: https://ideo-sso-profile-staging.herokuapp.com/api/v1/payment_methods?filter%5Bdefault%5D=true&filter%5Borganization_id%5D=186
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - Faraday v0.12.2
      Content-Type:
      - application/vnd.api+json
      Accept:
      - application/vnd.api+json
      Authorization:
      - Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzUxMiJ9.eyJ0eXBlIjoiYXBwbGljYXRpb24iLCJjbGllbnRfaWQiOiIzNjk1YzVmZTU1YWIzZGI2ZjllZTI1ZjE4YzBlZjJmZTcwMjVlYjQ3MTdmMWEwMzFmZDc4MjRhNWQ4Y2RkYmI1IiwidWlkIjoiMDB1ZXFieGc5ZUFpODBTWjQwaDciLCJleHBpcmVzIjoxNTUzNjMyMjI3fQ.FxfLmkVWB70FBcm9rZ3odahqNjTephdbNhtAWAZ2F6Wk34aZVhdxc8yCXgijIq49p5LTx-6pG09hQARvC7jJLNVPo3N2Ht8QgVurrfStCu3LOEMbOrzgJH7wDp62q1UG8A0JCqooSWlZhWmO_vh9J99Q5nrALmafTej1jL2WYnjpPk6K16PlDrOf14nLjhWx9NWn0hm1BAAHjWTC11H1AXhMrvxiLgHuAqupMOBZZUBKBw6MWBRwfWBCyKaB-dbvbLKj0pHFGuScouzOSDzzr4JJq0l2JgSWbxrcsvevH0UTA3XPrQA5ciDAwNdf0PzhcSOIgN14xv-fcGwE8B2HXQ
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - Cowboy
      Date:
      - Tue, 28 Jan 2020 00:55:35 GMT
      Connection:
      - keep-alive
      X-Frame-Options:
      - SAMEORIGIN
      X-Xss-Protection:
      - 1; mode=block
      X-Content-Type-Options:
      - nosniff
      X-Download-Options:
      - noopen
      X-Permitted-Cross-Domain-Policies:
      - none
      Referrer-Policy:
      - strict-origin-when-cross-origin
      Content-Type:
      - application/vnd.api+json; charset=utf-8
      Set-Cookie:
      - _sso_profile_session=YTNKd1FDL2dsaGdCdlczcGd1am5iZGZKWlV0a0lKWGtvQVlMNUlReDQxc2pkakF2Sk9CSG9GZWFFbjBVeW81Y0FNYXFFM0N6bVByTmh0aHJsZUhHVit4OEJ1bXNRRmhieUgwUUF6dEhCWkhFNWJYQTErVEdHY0tha0FzK1U2bjgtLWZ1OGZ2UktEVnZ5NExRSWx5bFZaNWc9PQ%3D%3D--02a8d55c692dba8e802e9d0a4c6b236ded2b6ae0;
        path=/; expires=Tue, 28 Jan 2020 04:55:36 -0000; HttpOnly; secure
      - rack.session=BAh7BkkiD3Nlc3Npb25faWQGOgZFVEkiRTBkNzcyZGQ2OTg4NTE1OTAwY2Iy%0AODIwNjkxNGU0YjE0NWRlODQ1NDNjMDIyNGYyZWQzMTY0YjY4NTMzOTBjZjkG%0AOwBG%0A--f80525c7394ee2ed8debb153cf5d8d3aab6dc3c5;
        path=/; expires=Tue, 28 Jan 2020 04:55:36 -0000; HttpOnly; secure
      Etag:
      - W/"342105d887cf40da5aa0f31b5c81908e"
      Cache-Control:
      - max-age=0, private, must-revalidate
      X-Request-Id:
      - 1a078da1-8f1c-42ad-b4c1-1192846c4b41
      X-Runtime:
      - '0.047850'
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains
      Vary:
      - Origin
      Transfer-Encoding:
      - chunked
      Via:
      - 1.1 vegur
    body:
      encoding: UTF-8
      string: '{"data":[{"id":"358","type":"payment_methods","attributes":{"id":358,"payment_type":"card","brand":"Visa","last4":"4242","exp_month":9,"exp_year":2019,"address_line1":null,"address_line2":null,"address_city":null,"address_state":null,"address_zip":"94111","address_country":"US","default":true,"expired":true,"created_at":"2018-12-19T19:38:15.133Z"},"relationships":{"user":{"meta":{"included":false}},"organization":{"meta":{"included":false}},"application_organization":{"meta":{"included":false}}}}],"meta":{},"jsonapi":{"version":"1.0"}}'
    http_version: 
  recorded_at: Tue, 28 Jan 2020 00:55:36 GMT
- request:
    method: post
    uri: https://ideo-sso-profile-staging.herokuapp.com/api/v1/subscriptions
    body:
      encoding: UTF-8
      string: '{"data":{"type":"subscriptions","attributes":{"organization_id":186,"plan_id":18,"payment_method_id":358}}}'
    headers:
      User-Agent:
      - Faraday v0.12.2
      Content-Type:
      - application/vnd.api+json
      Accept:
      - application/vnd.api+json
      Authorization:
      - Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzUxMiJ9.eyJ0eXBlIjoiYXBwbGljYXRpb24iLCJjbGllbnRfaWQiOiIzNjk1YzVmZTU1YWIzZGI2ZjllZTI1ZjE4YzBlZjJmZTcwMjVlYjQ3MTdmMWEwMzFmZDc4MjRhNWQ4Y2RkYmI1IiwidWlkIjoiMDB1ZXFieGc5ZUFpODBTWjQwaDciLCJleHBpcmVzIjoxNTUzNjMyMjI3fQ.FxfLmkVWB70FBcm9rZ3odahqNjTephdbNhtAWAZ2F6Wk34aZVhdxc8yCXgijIq49p5LTx-6pG09hQARvC7jJLNVPo3N2Ht8QgVurrfStCu3LOEMbOrzgJH7wDp62q1UG8A0JCqooSWlZhWmO_vh9J99Q5nrALmafTej1jL2WYnjpPk6K16PlDrOf14nLjhWx9NWn0hm1BAAHjWTC11H1AXhMrvxiLgHuAqupMOBZZUBKBw6MWBRwfWBCyKaB-dbvbLKj0pHFGuScouzOSDzzr4JJq0l2JgSWbxrcsvevH0UTA3XPrQA5ciDAwNdf0PzhcSOIgN14xv-fcGwE8B2HXQ
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 422
      message: Unprocessable Entity
    headers:
      Server:
      - Cowboy
      Date:
      - Tue, 28 Jan 2020 00:55:35 GMT
      Connection:
      - keep-alive
      X-Frame-Options:
      - SAMEORIGIN
      X-Xss-Protection:
      - 1; mode=block
      X-Content-Type-Options:
      - nosniff
      X-Download-Options:
      - noopen
      X-Permitted-Cross-Domain-Policies:
      - none
      Referrer-Policy:
      - strict-origin-when-cross-origin
      Content-Type:
      - application/scim+json; charset=utf-8
      Set-Cookie:
      - _sso_profile_session=anl5OTl6VzFOSDJwdFAzVHUxUmxFeE1ZeGhXd1dBMXdWdGFWb3RQd2hyejFldnN2YlFNM2g1d2RHZTdULzllRzdqMW45NmswS1dKMHZYNDgwV3dHNk82RUZCRjcydzBGaDRKMTI4UFRrMjFFYno1Y0dPdE9JNjNicXNFUjVoeSstLU1VRzZJZWQwMjY5eC9nK1dYNFIyTEE9PQ%3D%3D--49394ead56b4fbca86672c6be2e0561a0b04a17d;
        path=/; expires=Tue, 28 Jan 2020 04:55:36 -0000; HttpOnly; secure
      - rack.session=BAh7BkkiD3Nlc3Npb25faWQGOgZFVEkiRTdiODY3NGE2NWVhNTk5MGRlZGIz%0AZDJkOWZjMDcyZDc2MzE2YzljYzE4NWI3YmJkNTgxNDJiMTQxYWU3OGE1NzEG%0AOwBG%0A--3fa00e51692089a6edae0ade14f75655bc9121dd;
        path=/; expires=Tue, 28 Jan 2020 04:55:36 -0000; HttpOnly; secure
      Cache-Control:
      - no-cache
      X-Request-Id:
      - 152e52e4-9436-4621-b0d2-484a6a85d018
      X-Runtime:
      - '0.061291'
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains
      Vary:
      - Origin
      Transfer-Encoding:
      - chunked
      Via:
      - 1.1 vegur
    body:
      encoding: UTF-8
      string: '{"errors":[{"code":"unprocessable_entity","status":"422","title":"Validation
        Error","detail":"Payment method already has an active subscription on this
        same organization and plan","source":{"pointer":"/data/relationships/payment_method"},"meta":{"attribute":"payment_method","message":"already
        has an active subscription on this same organization and plan","code":"already
        has an active subscription on this same organization and plan"}}]}'
    http_version: 
  recorded_at: Tue, 28 Jan 2020 00:55:36 GMT
recorded_with: VCR 4.0.0
